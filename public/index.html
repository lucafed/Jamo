<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Jamo</title>

  <meta name="theme-color" content="#0A0F14" />
  <link rel="manifest" href="/manifest.webmanifest" />
  <link rel="icon" href="/icons/icon-192.png" />

  <style>
    :root{
      --bg1:#070b14; --bg2:#0b1220;
      --card:rgba(255,255,255,.06);
      --stroke:rgba(255,255,255,.10);
      --text:#ffffff;
      --muted:rgba(255,255,255,.68);
      --accent1:#2F7BFF;
      --accent2:#00D4FF;
      --danger:#ff4d4d;
      --ok:#20d18b;
      --radius:22px;

      /* nuovi */
      --glow: rgba(0,212,255,.18);
      --chip: rgba(255,255,255,.08);
      --chipStroke: rgba(255,255,255,.12);
      --warm: rgba(255, 200, 0, .14);
      --green: rgba(32, 209, 139, .16);
      --pink: rgba(255, 73, 173, .14);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      background:
        radial-gradient(900px 600px at 15% 10%, rgba(47,123,255,.20), transparent 60%),
        radial-gradient(900px 600px at 80% 0%, rgba(0,212,255,.16), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      display:flex;
      justify-content:center;
      align-items:flex-start;
    }
    .wrap{width:min(860px, 100%); padding: 16px 16px 28px;}
    .topbar{display:flex; align-items:center; justify-content:space-between; gap:12px; padding: 10px 4px 14px;}
    .brand{display:flex; align-items:center; gap:10px;}
    .logo{
      width:38px; height:38px; border-radius:12px;
      background: linear-gradient(135deg, var(--accent1), var(--accent2));
      box-shadow: 0 14px 40px rgba(0,212,255,.18);
      flex:0 0 auto;
    }
    .brand h1{margin:0; font-size:22px; letter-spacing:.2px;}
    .pill{
      font-size:12px; color:rgba(255,255,255,.78);
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      padding:8px 10px; border-radius: 999px; white-space:nowrap;
    }
    .card{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 18px 70px rgba(0,0,0,.45);
      backdrop-filter: blur(12px);
    }
    .headline{margin: 0 0 6px; font-size: 18px; line-height:1.25; font-weight: 900;}
    .sub{margin: 0 0 14px; color: var(--muted); line-height:1.45; font-size: 14px;}
    .grid{display:grid; grid-template-columns: 1fr; gap: 12px;}
    .field{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      border-radius: 18px;
      padding: 12px;
    }
    .field label{
      display:block;
      color: rgba(255,255,255,.72);
      font-size: 12px;
      margin-bottom: 8px;
      letter-spacing:.2px;
    }
    .row{display:flex; gap:10px; flex-wrap:wrap;}
    select, input{
      width:100%;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 14px;
      padding: 12px 12px;
      outline:none;
      font-size: 15px;
    }
    input::placeholder{color:rgba(255,255,255,.45)}
    .btn{
      width:100%;
      border:0;
      border-radius: 18px;
      padding: 15px 16px;
      font-size: 16px;
      font-weight: 900;
      color:#04101c;
      background: linear-gradient(90deg, var(--accent1), var(--accent2));
      cursor:pointer;
      box-shadow: 0 16px 45px rgba(0,212,255,.22);
    }
    .btn:disabled{opacity:.55; cursor:not-allowed}
    .btn2{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-weight: 900;
      font-size: 13px;
      white-space:nowrap;
    }

    .status{
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.20);
      color: rgba(255,255,255,.74);
      font-size: 13px;
      white-space: pre-wrap;
    }
    .status.err{border-color: rgba(255,77,77,.35); color:#ffd1d1}
    .status.ok{border-color: rgba(32,209,139,.35); color:#c9ffe7}

    .result{
      margin-top: 14px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.20);
      padding: 14px;
    }
    .hidden{display:none}

    .place-title{margin:0 0 6px; font-size: 20px; font-weight: 950;}
    .meta{margin:0 0 10px; color: rgba(255,255,255,.70); font-size: 13px; line-height: 1.4;}

    .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px;}
    .linkbtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      color:var(--text);
      text-decoration:none;
      background: rgba(255,255,255,.06);
      font-weight: 900;
      font-size: 13px;
    }

    .sectionTitle{
      margin: 14px 0 8px;
      font-size: 15px;
      letter-spacing:.2px;
      color: rgba(255,255,255,.92);
      font-weight: 900;
    }

    /* ===== NUOVO: card differenziate ===== */
    .alt-item{
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      margin-bottom: 8px;
    }
    .alt-item .name{font-weight:900}
    .alt-item .small{color:rgba(255,255,255,.68); font-size:12px; margin-top:2px}
    .alt-item.clickable{cursor:pointer}

    .why-card{
      border:1px solid rgba(0,212,255,.20);
      background: linear-gradient(180deg, rgba(0,212,255,.10), rgba(255,255,255,.03));
      box-shadow: 0 18px 55px rgba(0,212,255,.08);
    }
    .why-card .badge{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px; border-radius:999px;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
      font-size:12px; color:rgba(255,255,255,.86);
      margin-bottom: 6px;
    }
    .why-card .badge b{color:#fff}

    .route-step{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.20);
      position: relative;
      padding-left: 14px;
    }
    .route-step:before{
      content:"";
      position:absolute;
      left:10px; top:12px; bottom:12px;
      width:2px;
      background: rgba(255,255,255,.10);
      border-radius:99px;
    }
    .route-step .dot{
      width:10px; height:10px; border-radius:99px;
      background: linear-gradient(135deg, var(--accent1), var(--accent2));
      box-shadow: 0 0 0 4px rgba(0,212,255,.10);
      position:absolute;
      left:6px; top:18px;
    }
    .route-step .name{padding-left: 14px;}
    .route-step .small{padding-left: 14px;}

    .poi-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    @media (min-width: 640px){
      .poi-grid{grid-template-columns: 1fr 1fr;}
    }
    .poi-box{
      border-radius: 16px;
      padding: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }
    .poi-box h3{
      margin:0 0 8px;
      font-size: 13px;
      letter-spacing:.2px;
      color: rgba(255,255,255,.90);
      font-weight: 950;
      display:flex; align-items:center; gap:8px;
    }
    .poi-box--do{background: linear-gradient(180deg, rgba(32,209,139,.10), rgba(255,255,255,.03)); border-color: rgba(32,209,139,.18);}
    .poi-box--eat{background: linear-gradient(180deg, rgba(255,73,173,.10), rgba(255,255,255,.03)); border-color: rgba(255,73,173,.18);}

    .chip{
      display:inline-flex; align-items:center; justify-content:center;
      padding:7px 10px;
      border-radius: 999px;
      background: var(--chip);
      border:1px solid var(--chipStroke);
      color: rgba(255,255,255,.88);
      font-weight: 900;
      font-size: 12px;
      text-decoration:none;
      white-space:nowrap;
    }
    .chip.primary{
      background: linear-gradient(90deg, rgba(47,123,255,.95), rgba(0,212,255,.95));
      color:#04101c;
      border:0;
      box-shadow: 0 12px 35px var(--glow);
    }
    .monetize{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top: 8px;
    }

    .tiny{font-size: 12px; color: rgba(255,255,255,.60); margin-top: 8px; line-height:1.35;}
    .footer{margin-top: 14px; text-align:center; color: rgba(255,255,255,.55); font-size: 12px;}
    .footer a{color: rgba(255,255,255,.75); text-decoration: underline;}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo"></div>
        <h1>Jamo</h1>
      </div>
      <div class="pill">v9 ‚Ä¢ Consigli che risaltano</div>
    </div>

    <main class="card">
      <p class="headline">‚ÄúAndiamo da qualche parte?‚Äù ‚Üí ‚ÄúOk, ma dove?‚Äù</p>
      <p class="sub">
        Scegli <b>tempo</b>, <b>mezzo</b>, <b>stile</b> e <b>categoria</b>.
        Jamo ti propone una meta + alternative, e ti dice perch√©.
      </p>

      <div class="grid">
        <div class="field">
          <label>Partenza (opzionale)</label>
          <div class="row">
            <button id="gpsBtn" class="btn2" type="button">üìç Usa GPS</button>
            <input id="startInput" type="text" placeholder="Es: L‚ÄôAquila / Roma Termini / Via Roma 10, Perugia" />
          </div>
          <div class="tiny">Se inserisci un luogo user√≤ quello. Se lasci vuoto uso il GPS.</div>
        </div>

        <div class="field">
          <label>Filtri</label>
          <div class="row">
            <div style="flex:1; min-width:140px">
              <select id="timeSelect">
                <option value="30">30 min</option>
                <option value="45">45 min</option>
                <option value="60" selected>1 ora</option>
                <option value="90">1 ora e 30</option>
                <option value="120">2 ore</option>
                <option value="180">3 ore</option>
                <option value="240">4 ore</option>
                <option value="360">6 ore</option>
              </select>
            </div>

            <div style="flex:1; min-width:170px">
              <select id="modeSelect">
                <option value="car" selected>Auto</option>
                <option value="walk">A piedi</option>
                <option value="bike">Bici</option>
                <option value="train">Treno</option>
                <option value="bus">Bus</option>
                <option value="plane">Aereo</option>
              </select>
            </div>

            <div style="flex:1; min-width:170px">
              <select id="styleSelect">
                <option value="known" selected>Pi√π conosciuti</option>
                <option value="gems">Chicche</option>
              </select>
            </div>

            <div style="flex:1; min-width:220px">
              <select id="categorySelect">
                <option value="citta_borghi" selected>Citt√† + Borghi</option>
                <option value="citta">Solo Citt√†</option>
                <option value="borgo">Solo Borghi</option>
                <option value="mare">Mare</option>
                <option value="montagna">Montagna</option>
                <option value="natura">Natura</option>
                <option value="relax">Relax</option>
                <option value="bambini">Per bambini</option>
              </select>
            </div>
          </div>

          <div class="tiny">
            Tip: se hai segnato troppe mete come ‚Äúvisitato‚Äù, fai reset: <a href="/?reset=1">clicca qui</a>
          </div>
        </div>

        <button id="goBtn" class="btn" type="button">üé≤ DOVE ANDIAMO?</button>

        <div id="status" class="status">Pronto. Premi ‚ÄúDOVE ANDIAMO?‚Äù</div>

        <section id="result" class="result hidden">
          <div class="place-title" id="placeName"></div>
          <div class="meta" id="placeMeta"></div>

          <div class="actions">
            <a class="linkbtn" id="mapsLink" href="#" target="_blank" rel="noopener">Apri su Google Maps</a>
            <button class="btn2" id="visitedBtn" type="button">‚úÖ Gi√† visitato</button>
            <button class="btn2" id="rerollBtn" type="button">üîÅ Cambia meta</button>
          </div>

          <!-- CTA monetizzazione (risalta) -->
          <div class="sectionTitle">Link utili</div>
          <div class="monetize">
            <a class="chip primary" id="ctaTickets" href="#" target="_blank" rel="noopener">üéüÔ∏è Biglietti / Trasporti</a>
            <a class="chip" id="ctaHotels" href="#" target="_blank" rel="noopener">üè® Hotel</a>
            <a class="chip" id="ctaCar" href="#" target="_blank" rel="noopener">üöó Noleggio auto</a>
          </div>

          <div class="sectionTitle">Perch√© te lo consiglio</div>
          <div id="whyList"></div>

          <div class="sectionTitle">Alternative</div>
          <div id="altList"></div>

          <div class="sectionTitle">Come ci arrivi</div>
          <div id="routeList"></div>

          <div class="sectionTitle">Cosa fare / mangiare</div>
          <div id="poiList"></div>
        </section>
      </div>

      <div class="footer">Jamo ‚Ä¢ PWA ‚Ä¢ Dati: curated + routing stimato ‚Ä¢ Meteo: Open-Meteo</div>
    </main>
  </div>

  <script src="/app.js"></script>
</body>
</html>
